########################################################################
# Start/Stop Script for Domino on xLinux/zLinux/AIX/Solaris
# 2005-2016 Copyright by Daniel Nashed, feedback domino_unix@nashcom.de
# You may use and distribute the unmodified version of this script.
# Use at your own risk. No implied or specific warranties are given.
# You may change it for your own usage only
# Version 3.1.3 30.10.2017
########################################################################


# -- Mandatory Configuration --

LOTUS={{ __dom_install_location }}
# switch back to old path if needed ->LOTUS=/opt/ibm/lotus
DOMINO_DATA_PATH={{ __dom_notesdata }}
DOMINO_SHUTDOWN_TIMEOUT=600
DOMINO_CONFIGURED="yes"

# -- LANG setting on OS level that should be used --
# New default is to use what is specified in user profile.
DOMINO_LANG=en_US.UTF-8
#DOMINO_LANG=de_DE.UTF-8
#DOMINO_LANG=en_US
#DOMINO_LANG=de_DE

# -- Remove loadmon.ncf on startup --
DOMINO_RESET_LOADMON="yes"

# -- Run NSD before killing the Domino server when DOMINO_SHUTDOWN_TIMEOUT has been reached --
DOMINO_NSD_BEFORE_KILL="yes"

# -- Shared DPOOLSIZE for Linux Tuning --
#DOMINO_SHARED_DPOOLSIZE=20971520

# -- Remove temp-files on startup --
#DOMINO_REMOVE_TEMPFILES="yes"

# -- Domino Server Name if different from Linux/UNIX username --
#DOMINO_SERVER=$DOMINO_USER

# -- Start Script Debuging --
#DOMINO_DEBUG_MODE="yes"

# -- Optional Start Script Debug Output File --
#DOMINO_DEBUG_FILE=$DOMINO_DATA_PATH/debug_start_script.log

# -- Output/Input Log Directory --
#DOMINO_LOG_DIR=/local/log

# -- Backup Log Directory --
#DOMINO_LOG_BACKUP_DIR=/local/log/backup

# -- Archive Logs on Shutdown --
#DOMINO_ARCHIVE_LOGS_SHUTDOWN="yes"

# -- View Rebuild Dir to be created if not present (use notes.ini view_rebuild_dir to specify directory) --
#DOMINO_VIEW_REBUILD_DIR="/tmp/$DOMINO_USER/view_rebuild"
#DOMINO_VIEW_REBUILD_DIR="/dev/shm/$DOMINO_USER/view_rebuild"

# -- Notes Temp Dir to be created if not present (use notes.ini notes_tempdir to specify directory) --
#DOMINO_TEMP_DIR="/tmp/$DOMINO_USER/tempdir"

# -- Notes Log Dir to be created if not present (use notes.ini logfile_dir to specify directory for IBM_TECHNICAL_SUPPORT, debug_outfile for console.log file) --
#DOMINO_LOG_PATH="/tmp/$DOMINO_USER/log"

# -- Command to execute before shutting down the Domino server --
DOMINO_PRE_SHUTDOWN_COMMAND="tell traveler shutdown"

# -- Delay before shutting down the Domino server after invoking the pre-shutdown command --
#DOMINO_PRE_SHUTDOWN_DELAY=10

# -- Set the locale to POSIX (C) when running NSD --
#NSD_SET_POSIX_LC="yes"

# -- 3rd Party directories to check for running processes when cleaning up server resources (no blanks in path, multiple directories separated by blank) --
#DOMINO_3RD_PARTY_BIN_DIRS="/opt/your/bin/dir"

# -- Base Path for Scripts --
#DOMINO_SCRIPT_DIR=$LOTUS/scripts

# -- Pre-Shutdown Script --
#DOMINO_PRE_SHUTDOWN_SCRIPT=$DOMINO_SCRIPT_DIR/pre_shutdown_script

# -- Post-Shutdown Script --
#DOMINO_POST_SHUTDOWN_SCRIPT=$DOMINO_SCRIPT_DIR/post_shutdown_script

# -- Pre-Startup Script --
#DOMINO_PRE_STARTUP_SCRIPT=$DOMINO_SCRIPT_DIR/pre_startup_script

# -- Post-Startup Script --
#DOMINO_POST_STARTUP_SCRIPT=$DOMINO_SCRIPT_DIR/post_startup_script

# -- Pre-Kill Script --
#DOMINO_PRE_KILL_SCRIPT=$DOMINO_SCRIPT_DIR/pre_kill_script

# -- Post-Startup Script --
#DOMINO_POST_KILL_SCRIPT=$DOMINO_SCRIPT_DIR/post_kill_script

# -- Pre-Cleanup Script --
#DOMINO_PRE_CLEANUP_SCRIPT=$DOMINO_SCRIPT_DIR/pre_cleanup_script

# -- Post-Cleanup Script --
#DOMINO_POST_CLEANUP_SCRIPT=$DOMINO_SCRIPT_DIR/post_cleanup_script

# -- Custom Remove Tempfiles Script --
#DOMINO_CUSTOM_REMOVE_TEMPFILES_SCRIPT=$DOMINO_SCRIPT_DIR/remove_tempfiles

# -- Custom Status Script --
#DOMINO_PRE_STATUS_SCRIPT=$DOMINO_SCRIPT_DIR/pre_status_script

# -- Clear Logs on Startup --
#DOMINO_CLEAR_LOGS_STARTUP="yes"

# -- Number of Days until Logs are cleared --
#DOMINO_LOG_CLEAR_DAYS=90

# -- Number of Days until Backup Logs are cleared --
#DOMINO_LOG_BACKUP_CLEAR_DAYS=120

# -- Custom Log Cleanup Path --
#DOMINO_CUSTOM_LOG_CLEAR_PATH=/local/log/my_special_log_location

# -- Number of Days until Custom-Logs are cleared --
DOMINO_CUSTOM_LOG_CLEAR_DAYS=90

# -- Custom-Log Clear Script / replaces all other log clear functionalty! --
#DOMINO_CUSTOM_LOG_CLEAR_SCRIPT=$DOMINO_SCRIPT_DIR/custom_log_clear_script

# -- Rename log.nsf on startup after n days --
#DOMINO_LOG_DB_DAYS=7

# -- Target Directory for rename log.nsf on Startup / Default "log_backup" in Data Dir --
#DOMINO_LOG_DB_BACKUP_DIR=$DOMINO_DATA_PATH/log_backup


# -- Standard Compact Options Domino --
# Some Options are only available in D9 and late 8.5.3 versions
# -# nn  Execute up to nn compactions in parallel using different threads. Up to a maximum of 20 Threads with a default of 1.
# -W nn  Only compact databases which haven't been compacted successfully in last nn days. Ordered by last compact time.

#DOMINO_COMPACT_TASK="compact"
#DOMINO_COMPACT_OPTIONS="-#4 -C systemdbs.ind"
#DOMINO_START_COMPACT_OPTIONS="-#4 -W7 -C systemdbs.ind"

#DOMINO_LOG_COMPACT_OPTIONS="-C log.nsf"
#DOMINO_LOG_START_COMPACT_OPTIONS="-C -W7 log.nsf"

# -- Fixup Options --
#DOMINO_START_FIXUP_OPTIONS="-f -j systemdbs.ind"
#DOMINO_FIXUP_OPTIONS="-f -j systemdbs.ind"

# -- DBMT Compact Options Domino 9.x --
#DOMINO_COMPACT_TASK="dbmt"
#DOMINO_COMPACT_OPTIONS="-compactThreads 4 systemdbs.ind"
#DOMINO_START_COMPACT_OPTIONS="-compactThreads 4 systemdbs.ind"

#DOMINO_LOG_COMPACT_OPTIONS="-compactThreads 1 log.nsf"
#DOMINO_LOG_START_COMPACT_OPTIONS="-compactThreads 1 log.nsf"

# -- Custom Command Base Path --
#DOMINO_CUSTOM_COMMAND_BASEPATH="$LOTUS/commands"

# -- Monitor Filter String --
#DOMINO_MONITOR_FILTER_STRING="Opened session for|Closed session for"

# -- Domino PID file per Partition which has to match the PIDFile setting in the "domino.service" --
DOMINO_PID_FILE=$DOMINO_DATA_PATH/domino.pid
